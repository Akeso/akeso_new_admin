(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3d66"],{"1HT+":function(t,e,a){"use strict";var i=a("yIZB");a.n(i).a},IECo:function(t,e,a){"use strict";a.r(e);var i=a("t3Un");var l=a("+z1p"),o=a.n(l),n={data:function(){return{editor:o.a,editorConfig:{ckfinder:{uploadUrl:"/api/common/ckeditors"},rect:{height:500}},dialogFormVisible:!1,formLabelWidth:"120px",article_types:[],temp:{title:void 0,description:void 0,category:void 0,article_content:void 0}}},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var t=this;(function(t){return Object(i.a)({url:"/api/a1/popular_science_centers",method:"post",data:t})})(this.temp).then(function(e){t.$message({message:"创建成功",type:"success"}),t.$emit("createSuccess"),t.dialogFormVisible=!1})},show:function(){this.article_types=this.$store.state.articleTypes.article_types,this.dialogFormVisible=!0},resetData:function(){this.temp={title:void 0,description:void 0,category:void 0,article_content:void 0}}}},s=(a("LJX5"),a("KHd+")),r=Object(s.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"新增文章",width:"70%",top:"30px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.resetData}},[a("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[a("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"name",label:"标题"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"标题"},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"简介描述",prop:"gender"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{clearable:"",placeholder:"简介描述"},model:{value:t.temp.description,callback:function(e){t.$set(t.temp,"description",e)},expression:"temp.description"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"类别"}},[a("el-select",{attrs:{placeholder:"类别"},model:{value:t.temp.category,callback:function(e){t.$set(t.temp,"category",e)},expression:"temp.category"}},t._l(t.article_types,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"文章内容"}},[a("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.temp.article_content,callback:function(e){t.$set(t.temp,"article_content",e)},expression:"temp.article_content"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);r.options.__file="new.vue";var c=r.exports,d=a("P2sY"),u=a.n(d),p={data:function(){return{editor:o.a,editorConfig:{},uploadUrl:"/api/a1/popular_science_centers",dialogFormVisible:!1,formLabelWidth:"120px",article_types:[],temp:{id:void 0,title:void 0,description:void 0,category:void 0,article_content:void 0}}},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var t=this;(function(t){return Object(i.a)({url:"/api/a1/popular_science_centers/"+t.id,method:"put",data:t})})(this.temp).then(function(e){t.$message({message:"保存成功",type:"success"}),t.$emit("updateSuccess"),t.dialogFormVisible=!1})},show:function(t){this.article_types=this.$store.state.articleTypes.article_types,u()(this.temp,t),console.log("temp => ",this.temp),this.dialogFormVisible=!0},resetData:function(){this.temp={id:void 0,title:void 0,description:void 0,category:void 0,article_content:void 0}}}},m=(a("fsF1"),Object(s.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"编辑文章",width:"70%",top:"30px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.resetData}},[a("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[a("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"name",label:"标题"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"标题"},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"简介描述",prop:"gender"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{clearable:"",placeholder:"简介描述"},model:{value:t.temp.description,callback:function(e){t.$set(t.temp,"description",e)},expression:"temp.description"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"类别"}},[a("el-select",{attrs:{placeholder:"类别"},model:{value:t.temp.category,callback:function(e){t.$set(t.temp,"category",e)},expression:"temp.category"}},t._l(t.article_types,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"文章内容"}},[a("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.temp.article_content,callback:function(e){t.$set(t.temp,"article_content",e)},expression:"temp.article_content"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null));m.options.__file="edit.vue";var h=m.exports,f={data:function(){return{uploadUrl:"/api/a1/popular_science_centers/avatar",dialogFormVisible:!1,formLabelWidth:"120px",article_types:[],temp:{id:void 0,avatar:void 0,avatar_url:void 0}}},created:function(){},methods:{handleClickSubmit:function(){this.$refs.avatar_upload.submit()},handleAvatarSuccess:function(t,e){console.log("successssssss"),this.$message({message:"修改成功",type:"success"}),this.$emit("updateSuccess"),this.dialogFormVisible=!1},beforeAvatarUpload:function(t){console.log("file => ",t),this.temp.avatar=t},handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},show:function(t){u()(this.temp,t),this.dialogFormVisible=!0},resetData:function(){this.temp={id:void 0,avatar:void 0,avatar_url:void 0}}}},_=(a("1HT+"),Object(s.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"修改Logo",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.resetData}},[a("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[a("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"avatar",label:"请上传图片"}},[a("el-upload",{ref:"avatar_upload",staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"auto-upload":!1,action:t.uploadUrl,data:t.temp}},[t.temp.avatar_url?a("img",{staticClass:"avatar",attrs:{src:t.temp.avatar_url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("span",[t._v("建议图片规格900 x 500")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null));_.options.__file="avatar.vue";var v={components:{New:c,Edit:h,Avatar:_.exports},filters:{stateFilter:function(t){return{pending:"审核中",passed:"审核通过"}[t]},stateOperateFilter:function(t){return{pending:"通过",passed:"取消"}[t]}},data:function(){return{article_types:[],list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,article_type:void 0}}},computed:{isAdmin:function(){return"admin"===this.$store.getters.baseType}},created:function(){this.getArticleTypes(),this.getList()},methods:{handleClickChangeState:function(t){var e=this,a="passed"===t.state?"确定取消审核该文章吗？":"确定要审核通过该文章吗？",l="passed"===t.state?"取消审核成功":"审核通过成功";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(i.a)({url:"/api/a1/popular_science_centers/change_state",method:"get",params:t})})(t).then(function(t){e.getList(),e.$message({type:"success",message:l})})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},handleClickRelease:function(t){var e=this,a=t.is_release?"确定取消发布该文章吗？":"确定要发布该文章吗？",l=t.is_release?"取消发布成功":"发布成功";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(i.a)({url:"/api/a1/popular_science_centers/release",method:"post",data:t})})(t).then(function(t){e.getList(),e.$message({type:"success",message:l})})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},handleClickDelete:function(t){var e=this;this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(i.a)({url:"/api/a1/popular_science_centers/"+t.id,method:"delete"})})(t).then(function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleClickAvatar:function(t){console.log("val => ",t),this.$refs.avatar_center.show(t)},handleClickEdit:function(t){this.$refs.edit_center.show(t)},handleClickCreate:function(){this.$refs.create.show()},getArticleTypes:function(){var t=this;(function(t){return Object(i.a)({url:"/api/a1/article_types",method:"get",params:t})})().then(function(e){t.article_types=e.data.items,t.$store.commit("handleArticleTypes",e.data.items)})},getList:function(){var t=this;(function(t){return Object(i.a)({url:"/api/a1/popular_science_centers",method:"get",params:t})})(this.listQuery).then(function(e){t.list=e.data.items})},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()}}},g=(a("feGF"),Object(s.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{attrs:{"body-style":{padding:"0px 10px 10px 20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.generateShow("route.popular_science_centers")))])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:t.generateShow("common.type")}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:t.listQuery.article_type,callback:function(e){t.$set(t.listQuery,"article_type",e)},expression:"listQuery.article_type"}},t._l(t.article_types,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getList}},[t._v(t._s(t.generateShow("common.search")))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.handleClickCreate}},[t._v(t._s(t.generateShow("common.new")))])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{label:t.generateShow("common.title"),prop:"title","min-width":"180"}}),t._v(" "),a("el-table-column",{attrs:{label:t.generateShow("common.type"),prop:"category_name","min-width":"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"Logo","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.avatar_url,alt:""}}),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClickAvatar(e.row)}}},[t._v("修改Logo")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.generateShow("common.publish_merchant"),prop:"merchant_name","min-width":"60"}}),t._v(" "),a("el-table-column",{attrs:{label:t.generateShow("common.created_at"),prop:"created_at","min-width":"60"}}),t._v(" "),a("el-table-column",{attrs:{label:t.generateShow("common.check_state"),"min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(t._f("stateFilter")(e.row.state)))]),t._v(" "),t.isAdmin&&!e.row.is_release?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClickChangeState(e.row)}}},[t._v(t._s(t._f("stateOperateFilter")(e.row.state)))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.generateShow("common.publish_state"),"min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(e.row.is_release?"已发布":"未发布"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.generateShow("common.operate"),"min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isAdmin&&"passed"==e.row.state?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClickRelease(e.row)}}},[t._v(t._s(e.row.is_release?"撤销发布":"发布"))]):t._e(),t._v(" "),e.row.is_release||"pending"!=e.row.state?t._e():a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClickEdit(e.row)}}},[t._v(t._s(t.generateShow("common.modify")))]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClickDelete(e.row)}}},[t._v(t._s(t.generateShow("common.delete")))])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("New",{ref:"create",on:{createSuccess:t.getList}}),t._v(" "),a("Edit",{ref:"edit_center",on:{updateSuccess:t.getList}}),t._v(" "),a("Avatar",{ref:"avatar_center",on:{updateSuccess:t.getList}})],1)},[],!1,null,"3812857d",null));g.options.__file="popular_science_centers.vue";e.default=g.exports},LJX5:function(t,e,a){"use strict";var i=a("tdiT");a.n(i).a},XBzL:function(t,e,a){},feGF:function(t,e,a){"use strict";var i=a("u2gz");a.n(i).a},fsF1:function(t,e,a){"use strict";var i=a("XBzL");a.n(i).a},tdiT:function(t,e,a){},u2gz:function(t,e,a){},yIZB:function(t,e,a){}}]);
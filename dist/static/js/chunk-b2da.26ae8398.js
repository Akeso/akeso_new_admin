(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b2da"],{"6wf4":function(e,t,l){"use strict";var a=l("aseV");l.n(a).a},AyOo:function(e,t,l){"use strict";l.r(t);var a=l("THlk"),i={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",passwork_valid:!1,temp:{name:void 0,brand:void 0,serial:void 0,number:void 0,des:void 0,price:void 0,total:0},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},loading:!1}},computed:{},watch:{},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;Object(a.a)(e.temp).then(function(t){e.resetData(),e.dialogFormVisible=!1,e.$emit("create-success")})})},show:function(){this.dialogFormVisible=!0},resetData:function(){this.$refs.ruleForm.resetFields(),this.temp={name:void 0,brand:void 0,serial:void 0,number:void 0,des:void 0,price:void 0,total:0}}}},o=l("KHd+"),r=Object(o.a)(i,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{visible:e.dialogFormVisible,"close-on-click-modal":!1,title:"新增产品",width:"70%",top:"30px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:e.temp,rules:e.rules}},[l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"name",label:"名称"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"产品名称"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"brand",label:"品牌"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"品牌"},model:{value:e.temp.brand,callback:function(t){e.$set(e.temp,"brand",t)},expression:"temp.brand"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"serial",label:"系列"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"系列"},model:{value:e.temp.serial,callback:function(t){e.$set(e.temp,"serial",t)},expression:"temp.serial"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"price",label:"价格"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"价格"},model:{value:e.temp.price,callback:function(t){e.$set(e.temp,"price",t)},expression:"temp.price"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"total",label:"总量"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"总量"},model:{value:e.temp.total,callback:function(t){e.$set(e.temp,"total",t)},expression:"temp.total"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"unit",label:"单位"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"单位"},model:{value:e.temp.unit,callback:function(t){e.$set(e.temp,"unit",t)},expression:"temp.unit"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.handleClickCancel}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v("确 定")])],1)],1)},[],!1,null,null,null);r.options.__file="new_product.vue";var n=r.exports,s={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",passwork_valid:!1,temp:{name:void 0,brand:void 0,serial:void 0,number:void 0,des:void 0,price:void 0,total:0},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},loading:!1}},computed:{},watch:{},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;Object(a.d)(e.temp).then(function(t){e.resetData(),e.dialogFormVisible=!1,e.$emit("create-success")})})},show:function(e){this.temp=e,this.dialogFormVisible=!0},resetData:function(){this.$refs.ruleForm.resetFields(),this.temp={name:void 0,brand:void 0,serial:void 0,number:void 0,des:void 0,price:void 0,total:0}}}},c=Object(o.a)(s,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{visible:e.dialogFormVisible,"close-on-click-modal":!1,title:"新增产品",width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:e.temp,rules:e.rules}},[l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"name",label:"名称"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"产品名称"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"brand",label:"品牌"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"品牌"},model:{value:e.temp.brand,callback:function(t){e.$set(e.temp,"brand",t)},expression:"temp.brand"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"serial",label:"系列"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"系列"},model:{value:e.temp.serial,callback:function(t){e.$set(e.temp,"serial",t)},expression:"temp.serial"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"price",label:"价格"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"价格"},model:{value:e.temp.price,callback:function(t){e.$set(e.temp,"price",t)},expression:"temp.price"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"total",label:"总量"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"总量"},model:{value:e.temp.total,callback:function(t){e.$set(e.temp,"total",t)},expression:"temp.total"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"unit",label:"单位"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"单位"},model:{value:e.temp.unit,callback:function(t){e.$set(e.temp,"unit",t)},expression:"temp.unit"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.handleClickCancel}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v("确 定")])],1)],1)},[],!1,null,null,null);c.options.__file="edit_product.vue";var d={components:{NewProduct:n,EditProduct:c.exports},data:function(){return{uploadData:{authenticationToken:this.$store.state.user.authenticationToken},list:[],total:0,listQuery:{page:1,limit:20,name:void 0,brand:void 0,serial:void 0}}},created:function(){this.getList()},channels:{ProductChannel:{connected:function(){console.log("ChatChannel => connected.")},rejected:function(){console.log("ChatChannel => rejected.")},received:function(e){console.log("ChatChannel => received. => ",e)},disconnected:function(){console.log("ChatChannel => disconnected.")}}},mounted:function(){},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){},handleSuccess:function(e,t){console.log("handleSuccess : res => ",e),200===e.status?this.$message({message:"恭喜你，上传成功.",type:"success"}):this.$message({message:"上传失败，请检查后重新上传.",type:"warning"})},handleClickNew:function(){this.$refs.newProduct.show()},handleClickEdit:function(e){this.$refs.editProduct.show(e)},handleClickDelete:function(e){var t=this;this.$confirm("确定要删除该产品吗?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){Object(a.b)(e).then(function(e){t.getList()})}).catch(function(){})},getList:function(){var e=this;Object(a.c)(this.listQuery).then(function(t){e.list=t.data.items,e.total=t.data.total})},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleFilterClear:function(){this.listQuery.name=void 0,this.listQuery.brand=void 0,this.listQuery.serial=void 0},downloadExc:function(){window.location.href="https://akeso.com.cn/template/import_products.xlsx"}}},u=(l("6wf4"),Object(o.a)(d,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-card",{staticClass:"box-card"},[l("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[l("span",[e._v(e._s(e.generateShow("route.products")))])]),e._v(" "),l("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[l("el-col",[l("el-upload",{staticClass:"upload-demo",attrs:{"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.handleSuccess,limit:1,data:e.uploadData,accept:".xlsx, .xls",action:"/api/common/excels/upload_products"}},[l("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.handleClickNew(t)}}},[e._v("新增产品")]),e._v(" "),l("el-button",{staticClass:"left",attrs:{size:"small",type:"primary"}},[e._v(e._s(e.generateShow("common.upload"))+"Excel")]),e._v(" "),l("el-button",{staticClass:"left m-l-2",attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.downloadExc(t)}}},[e._v(e._s(e.generateShow("common.download"))+"Excel模板")]),e._v(" "),l("span",{staticClass:"el-upload__tip c-red left tit-btn",attrs:{slot:"tip"},slot:"tip"},[e._v("只能"+e._s(e.generateShow("common.upload"))+".xlsx, .xls文件")])],1)],1)],1),e._v(" "),l("el-row",[l("el-col",[e._v("\n        "+e._s(e.generateShow("product.name"))+":\n        "),l("el-input",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{placeholder:e.generateShow("product.name"),size:"small",label:"名称",clearable:""},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v("\n        "+e._s(e.generateShow("product.brand"))+":\n        "),l("el-input",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{placeholder:e.generateShow("product.brand"),size:"small",label:"品牌",clearable:""},model:{value:e.listQuery.brand,callback:function(t){e.$set(e.listQuery,"brand",t)},expression:"listQuery.brand"}}),e._v("\n        "+e._s(e.generateShow("product.serial"))+":\n        "),l("el-input",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{placeholder:e.generateShow("product.serial"),size:"small",label:"系列",clearable:""},model:{value:e.listQuery.serial,callback:function(t){e.$set(e.listQuery,"serial",t)},expression:"listQuery.serial"}}),e._v(" "),l("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v(e._s(e.generateShow("common.search")))]),e._v(" "),l("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary"},on:{click:e.handleFilterClear}},[e._v(e._s(e.generateShow("common.clear")))])],1)],1),e._v(" "),l("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,border:""}},[l("el-table-column",{attrs:{label:e.generateShow("product.name"),prop:"name","min-width":"80"}}),e._v(" "),l("el-table-column",{attrs:{label:e.generateShow("product.brand"),prop:"brand","min-width":"80"}}),e._v(" "),l("el-table-column",{attrs:{label:e.generateShow("product.serial"),prop:"serial","min-width":"80"}}),e._v(" "),l("el-table-column",{attrs:{label:e.generateShow("product.price"),prop:"price","min-width":"80"}}),e._v(" "),l("el-table-column",{attrs:{label:e.generateShow("product.total"),prop:"total","min-width":"80"}}),e._v(" "),l("el-table-column",{attrs:{label:"剩余数量",prop:"rest_count","min-width":"80"}}),e._v(" "),l("el-table-column",{attrs:{label:e.generateShow("common.operate"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(l){e.handleClickEdit(t.row)}}},[e._v("修改")]),e._v(" "),l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(l){e.handleClickDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),l("NewProduct",{ref:"newProduct",on:{"create-success":e.getList}}),e._v(" "),l("EditProduct",{ref:"editProduct",on:{"create-success":e.getList}})],1)},[],!1,null,"c421136c",null));u.options.__file="index.vue";t.default=u.exports},THlk:function(e,t,l){"use strict";l.d(t,"c",function(){return i}),l.d(t,"a",function(){return o}),l.d(t,"d",function(){return r}),l.d(t,"b",function(){return n});var a=l("t3Un");function i(e){return Object(a.a)({url:"/api/a1/products",method:"get",params:e})}function o(e){return Object(a.a)({url:"/api/a1/products",method:"post",data:e})}function r(e){return Object(a.a)({url:"/api/a1/products/"+e.id,method:"put",data:e})}function n(e){return Object(a.a)({url:"/api/a1/products/"+e.id,method:"delete",params:e})}},aseV:function(e,t,l){}}]);
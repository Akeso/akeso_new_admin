(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-71ba"],{"5vyQ":function(e,t,i){"use strict";i.r(t);var a=i("t3Un");var n=i("SF+J"),l=i("CCno"),r=[{key:"male",display_name:"男"},{key:"female",display_name:"女"}],o={data:function(){return{dialogVisible:!1,temp:{name:void 0,parent_name:void 0,phone:void 0,gender:"male",birthday:new Date,height:void 0,weight:void 0,nation:void 0,province_code:void 0,city_code:void 0,district_code:void 0},genderOptions:r,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:6,message:"长度在 1 到 6 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}]},provinceData:[],cityData:[],districtData:[]}},watch:{"temp.province_code":function(e,t){this.getCityData(e),this.temp.city_code=void 0,this.temp.district_code=void 0},"temp.city_code":function(e,t){this.getDistrictData(e),this.temp.district_code=void 0}},methods:{handlerClickCancel:function(){this.$refs.ruleForm.resetFields(),this.temp={name:void 0,parent_name:void 0,phone:void 0,gender:"male",birthday:new Date,height:void 0,weight:void 0,nation:void 0,province_code:void 0,city_code:void 0,district_code:void 0},this.dialogVisible=!1},handleShow:function(){this.dialogVisible=!0,this.getProvinceData()},handleClickSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;Object(n.a)(e.temp).then(function(t){e.dialogVisible=!1})})},getProvinceData:function(){var e=this;Object(l.a)().then(function(t){e.provinceData=t.data})},getCityData:function(e){var t=this;Object(l.a)({province_code:e}).then(function(e){t.cityData=e.data})},getDistrictData:function(e){var t=this;Object(l.a)({city_code:e}).then(function(e){t.districtData=e.data})}}},c=i("KHd+"),s=Object(c.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,modal:!0,"close-on-click-modal":!1,title:"新建儿童档案",width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"60%","margin-left":"80px"},attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:"孩子姓名",prop:"name"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"输入孩子姓名"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"家长姓名"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"输入家长姓名"},model:{value:e.temp.parent_name,callback:function(t){e.$set(e.temp,"parent_name",t)},expression:"temp.parent_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"输入家长电话"},model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"孩子性别",prop:"gender"}},[i("el-select",{staticClass:"filter-item",model:{value:e.temp.gender,callback:function(t){e.$set(e.temp,"gender",t)},expression:"temp.gender"}},e._l(e.genderOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"出生年月日",prop:"birthday"}},[i("el-date-picker",{attrs:{type:"date",format:"yyyy年 MM月 dd日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.temp.birthday,callback:function(t){e.$set(e.temp,"birthday",t)},expression:"temp.birthday"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"身高"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"输入身高"},model:{value:e.temp.height,callback:function(t){e.$set(e.temp,"height",t)},expression:"temp.height"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"体重",prop:"type"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"输入体重"},model:{value:e.temp.weight,callback:function(t){e.$set(e.temp,"weight",t)},expression:"temp.weight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"民族",prop:"type"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"输入民族"},model:{value:e.temp.nation,callback:function(t){e.$set(e.temp,"nation",t)},expression:"temp.nation"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"地区",prop:"type"}},[i("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择"},model:{value:e.temp.province_code,callback:function(t){e.$set(e.temp,"province_code",t)},expression:"temp.province_code"}},e._l(e.provinceData,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),e._v(" "),i("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.temp.city_code,callback:function(t){e.$set(e.temp,"city_code",t)},expression:"temp.city_code"}},e._l(e.cityData,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),e._v(" "),i("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.temp.district_code,callback:function(t){e.$set(e.temp,"district_code",t)},expression:"temp.district_code"}},e._l(e.districtData,function(e){return i("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handlerClickCancel}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v("提交")])],1)],1)},[],!1,null,null,null);s.options.__file="new_archive.vue";var d={components:{NewArchive:s.exports},filters:{genderFilter:function(e){return{male:"男",female:"女",unknown:"未知"}[e]}},data:function(){return{list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,name:void 0}}},created:function(){this.getList()},methods:{handleClickNew:function(){this.$refs.newArchive.handleShow()},getList:function(){var e=this;(function(e){return Object(a.a)({url:"/api/a1/overview_diopter_files",method:"get",params:e})})(this.listQuery).then(function(t){e.list=t.data.items,e.total=t.data.total,setTimeout(function(){e.listLoading=!1},1e3)})},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleColumnSort:function(e){this.listQuery.sortProp=e.prop,this.listQuery.sortOrder=e.order,this.getList()},handleFilter:function(){this.getList()},handleFilterClear:function(){this.listQuery.name="",this.getList()}}},u=Object(c.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(e.generateShow("route.archives")))])]),e._v(" "),i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.handleClickNew}},[e._v(e._s(e.generateShow("common.new_child")))])],1),e._v(" "),i("el-row",[e._v("\n      "+e._s(e.generateShow("common.name"))+":\n      "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{label:"姓名",placeholder:"姓名",clearable:""},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(e._s(e.generateShow("common.search")))]),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.handleFilterClear}},[e._v(e._s(e.generateShow("common.clear")))])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,border:""},on:{"sort-change":e.handleColumnSort}},[i("el-table-column",{attrs:{label:e.generateShow("common.name"),"min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{attrs:{to:"/preview/child/"+t.row.id}},[i("el-button",{attrs:{type:"text",size:"small"}},[e._v(e._s(t.row.name))])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.generateShow("common.age"),prop:"age","min-width":"50"}}),e._v(" "),i("el-table-column",{attrs:{label:e.generateShow("common.gender"),prop:"gender","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("genderFilter")(t.row.gender)))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.generateShow("common.location"),prop:"locationString","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:e.generateShow("common.phone"),prop:"phone","min-width":"100"}}),e._v(" "),i("el-table-column",{attrs:{label:e.generateShow("common.created_at"),prop:"createdAt","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{attrs:{to:"/preview/child/"+t.row.id+"?tabName=third"}},[i("el-button",{attrs:{type:"text",size:"small"}},[e._v(e._s(e.generateShow("common.create_eye_examination")))])],1)]}}])})],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),i("NewArchive",{ref:"newArchive"})],1)},[],!1,null,null,null);u.options.__file="archives.vue";t.default=u.exports},CCno:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("t3Un");function n(e){return Object(a.a)({url:"/api/a1/city_maps",method:"get",params:e})}},"SF+J":function(e,t,i){"use strict";i.d(t,"e",function(){return n}),i.d(t,"b",function(){return l}),i.d(t,"d",function(){return r}),i.d(t,"c",function(){return o}),i.d(t,"a",function(){return c}),i.d(t,"g",function(){return s}),i.d(t,"h",function(){return d}),i.d(t,"i",function(){return u}),i.d(t,"f",function(){return m});var a=i("t3Un");function n(e){return Object(a.a)({url:"/api/a1/children",method:"get",params:e})}function l(e){return Object(a.a)({url:"/api/a1/children/"+e.id,method:"get"})}function r(e){return Object(a.a)({url:"/api/a1/children/with_equipment",method:"get",params:e})}function o(e){return Object(a.a)({url:"/api/a1/children/index_en",method:"get",params:e})}function c(e){return Object(a.a)({url:"/api/a1/children",method:"post",data:e})}function s(e){return Object(a.a)({url:"/api/a1/children/"+e.id+"/unbind_doctor",method:"get"})}function d(e){return Object(a.a)({url:"/api/a1/children/"+e.id,method:"put",data:e})}function u(e){return Object(a.a)({url:"/api/a1/children/update_tags",method:"put",data:e})}function m(e){return console.log("query => ",e),Object(a.a)({url:"/api/a1/children/self_index",method:"get",params:e})}}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-39b7"],{F0kc:function(t,e,i){},FuKw:function(t,e,i){"use strict";var l=i("F0kc");i.n(l).a},IECo:function(t,e,i){"use strict";i.r(e);var l=i("t3Un");var a=i("+z1p"),o=i.n(a),r={data:function(){return{editor:o.a,editorConfig:{height:500,ckfinder:{uploadUrl:"/api/common/ckeditors"}},dialogFormVisible:!1,formLabelWidth:"120px",article_types:[],temp:{title:void 0,description:void 0,category:void 0,article_content:void 0}}},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var t=this;(function(t){return Object(l.a)({url:"/api/a1/popular_science_centers",method:"post",data:t})})(this.temp).then(function(e){t.$message({message:"创建成功",type:"success"}),t.$emit("createSuccess"),t.dialogFormVisible=!1})},show:function(){this.article_types=this.$store.state.articleTypes.article_types,this.dialogFormVisible=!0},resetData:function(){this.temp={title:void 0,description:void 0,category:void 0,article_content:void 0}}}},n=i("KHd+"),s=Object(n.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"新增文章",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"name",label:"标题"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"标题"},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"简介描述",prop:"gender"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{clearable:"",placeholder:"简介描述"},model:{value:t.temp.description,callback:function(e){t.$set(t.temp,"description",e)},expression:"temp.description"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"类别"}},[i("el-select",{attrs:{placeholder:"类别"},model:{value:t.temp.category,callback:function(e){t.$set(t.temp,"category",e)},expression:"temp.category"}},t._l(t.article_types,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"文章内容"}},[i("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.temp.article_content,callback:function(e){t.$set(t.temp,"article_content",e)},expression:"temp.article_content"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);s.options.__file="new.vue";var c=s.exports,d=i("P2sY"),p=i.n(d),u={data:function(){return{editor:o.a,editorConfig:{},dialogFormVisible:!1,formLabelWidth:"120px",article_types:[],temp:{id:void 0,title:void 0,description:void 0,category:void 0,article_content:void 0}}},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var t=this;(function(t){return Object(l.a)({url:"/api/a1/popular_science_centers/"+t.id,method:"put",data:t})})(this.temp).then(function(e){t.$message({message:"保存成功",type:"success"}),t.$emit("updateSuccess"),t.dialogFormVisible=!1})},show:function(t){this.article_types=this.$store.state.articleTypes.article_types,p()(this.temp,t),console.log("temp => ",this.temp),this.dialogFormVisible=!0},resetData:function(){this.temp={title:void 0,description:void 0,category:void 0,article_content:void 0}}}},m=Object(n.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"编辑文章",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"name",label:"标题"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"标题"},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"简介描述",prop:"gender"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{clearable:"",placeholder:"简介描述"},model:{value:t.temp.description,callback:function(e){t.$set(t.temp,"description",e)},expression:"temp.description"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"类别"}},[i("el-select",{attrs:{placeholder:"类别"},model:{value:t.temp.category,callback:function(e){t.$set(t.temp,"category",e)},expression:"temp.category"}},t._l(t.article_types,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"文章内容"}},[i("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.temp.article_content,callback:function(e){t.$set(t.temp,"article_content",e)},expression:"temp.article_content"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);m.options.__file="edit.vue";var h={components:{New:c,Edit:m.exports},data:function(){return{article_types:[],list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,article_type:void 0}}},created:function(){this.getArticleTypes(),this.getList()},methods:{handleClickEdit:function(t){this.$refs.edit_center.show(t)},handleClickCreate:function(){this.$refs.create.show()},getArticleTypes:function(){var t=this;(function(t){return Object(l.a)({url:"/api/a1/article_types",method:"get",params:t})})().then(function(e){t.article_types=e.data.items,t.$store.commit("handleArticleTypes",e.data.items)})},getList:function(){var t=this;(function(t){return Object(l.a)({url:"/api/a1/popular_science_centers",method:"get",params:t})})(this.listQuery).then(function(e){t.list=e.data.items})},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()}}},f=(i("FuKw"),Object(n.a)(h,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{attrs:{"body-style":{padding:"0px 10px 10px 20px"}}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",[t._v("科普文章")])]),t._v(" "),i("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px"},attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"类型"}},[i("el-select",{attrs:{placeholder:"全部"},model:{value:t.listQuery.article_type,callback:function(e){t.$set(t.listQuery,"article_type",e)},expression:"listQuery.article_type"}},t._l(t.article_types,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.getList}},[t._v("搜索")]),t._v(" "),i("el-button",{attrs:{type:"success"},on:{click:t.handleClickCreate}},[t._v("新增")])],1)],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[i("el-table-column",{attrs:{prop:"title",label:"标题","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{label:"Logo","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.avatar_url,alt:""}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"badPostureTimes",label:"发表机构","min-width":"60"}}),t._v(" "),i("el-table-column",{attrs:{prop:"created_at",label:"发布时间","min-width":"60"}}),t._v(" "),i("el-table-column",{attrs:{label:"状态","min-width":"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",[t._v(t._s(e.row.is_release?"已发布":"未发布"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"}},[t._v("预览")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"}},[t._v("发布")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleClickEdit(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),i("New",{ref:"create",on:{createSuccess:t.getList}}),t._v(" "),i("Edit",{ref:"edit_center",on:{updateSuccess:t.getList}})],1)},[],!1,null,"b398e974",null));f.options.__file="popular_science_centers.vue";e.default=f.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["Mswr"],{Mswr:function(t,e,n){"use strict";n.r(e);var o=n("t3Un");var a={filters:{followStateFilter:function(t){return{following:"待随访",confirmed:"已联系并确认预约",unconfirmed:"已联系无法确认预约时间",uncontact:"无法联系"}[t]}},data:function(){return{list:null,total:null,todayCount:0,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,sortProp:"",sortOrder:"",month:new Date,follow_radio:"following"}}},computed:{showFirst:function(){return"first"===this.tabName}},created:function(){this.getList()},methods:{radioChanged:function(t){this.getList()},handleClickContact:function(t,e){var n=this;this.$confirm("确认执行此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(o.a)({url:"/api/a1/eye_examinations/update_state",method:"put",data:t})})({id:t.id,state:e}).then(function(t){n.getList(),n.$message({type:"success",message:"操作成功!"})})}).catch(function(){n.$message({type:"info",message:"已取消操作"})})},changeDate:function(t){this.getList()},getList:function(){var t=this;(function(t){return Object(o.a)({url:"/api/a1/eye_examinations/follow",method:"get",params:t})})(this.listQuery).then(function(e){t.list=e.data.items,t.total=e.data.total})},handleColumnSort:function(){},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()}}},l=n("KHd+"),i=Object(l.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(t.generateShow("route.by_child")))])]),t._v(" "),n("div",{staticStyle:{"margin-bottom":"10px"}},[n("span",{staticClass:"demonstration"},[t._v(t._s(t.generateShow("common.select_date"))+"：")]),t._v(" "),n("el-date-picker",{attrs:{type:"month",placeholder:"选择月","value-format":"yyyy-MM-dd"},on:{change:t.changeDate},model:{value:t.listQuery.month,callback:function(e){t.$set(t.listQuery,"month",e)},expression:"listQuery.month"}})],1),t._v(" "),n("el-radio-group",{on:{change:t.radioChanged},model:{value:t.listQuery.follow_radio,callback:function(e){t.$set(t.listQuery,"follow_radio",e)},expression:"listQuery.follow_radio"}},[n("el-radio-button",{attrs:{label:"following"}},[t._v("待随访")]),t._v(" "),n("el-radio-button",{attrs:{label:"followed"}},[t._v("已随访")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,border:""},on:{"sort-change":t.handleColumnSort}},[n("el-table-column",{attrs:{label:t.generateShow("common.name"),"min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:"/preview/child/"+e.row.child_id}},[n("el-button",{attrs:{type:"text",size:"small"}},[t._v(t._s(e.row.child_name))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.gender"),prop:"child_gender","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("genderFilter")(e.row.child_gender))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.age"),prop:"child_age","min-width":"60"}}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.phone"),prop:"phone","min-width":"80"}}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.follow_state"),prop:"followState","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("followStateFilter")(e.row.follow_state))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.operate"),"min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return"following"===e.row.follow_state?[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.handleClickContact(e.row,"confirmed")}}},[t._v("已联系并确认预约")]),t._v(" "),n("br"),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.handleClickContact(e.row,"unconfirmed")}}},[t._v("已联系尚无法确认时间")]),t._v(" "),n("br"),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.handleClickContact(e.row,"uncontact")}}},[t._v("无法联系")])]:void 0}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},[],!1,null,null,null);i.options.__file="by_child.vue";e.default=i.exports}}]);
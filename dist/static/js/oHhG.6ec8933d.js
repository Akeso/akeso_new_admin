(window.webpackJsonp=window.webpackJsonp||[]).push([["oHhG"],{oHhG:function(t,e,i){"use strict";i.r(e);var a=i("t3Un");function l(t){return Object(a.a)({url:"/api/a1/awards/change_images",method:"get",params:t})}function o(t){return Object(a.a)({url:"/api/a1/awards/images",method:"get",params:t})}var s={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",temp:{name:void 0,description:void 0,price:void 0,min_condition:void 0,valid_days:void 0}}},created:function(){},methods:{handleClickCancel:function(){this.dialogFormVisible=!1},show:function(){this.dialogFormVisible=!0},handleClickSubmit:function(){var t=this;(function(t){return Object(a.a)({url:"/api/a1/awards",method:"post",data:t})})(this.temp).then(function(e){t.$emit("create-success"),t.dialogFormVisible=!1})}}},n=i("KHd+"),r=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"新增奖品",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"名称"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"价格"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.price,callback:function(e){t.$set(t.temp,"price",e)},expression:"temp.price"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"兑换标准"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.min_condition,callback:function(e){t.$set(t.temp,"min_condition",e)},expression:"temp.min_condition"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"有效天数"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.valid_days,callback:function(e){t.$set(t.temp,"valid_days",e)},expression:"temp.valid_days"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"简介"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea"},model:{value:t.temp.description,callback:function(e){t.$set(t.temp,"description",e)},expression:"temp.description"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);r.options.__file="new_award.vue";var d=r.exports,c={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",temp:{name:void 0,description:void 0,price:void 0,minCondition:void 0,validDays:void 0},actionUrl:"/api/common/uploads",imageUrl:void 0,data:{asset_type:"AwardImage"}}},created:function(){},methods:{handleClickCancel:function(){this.dialogFormVisible=!1},show:function(t){this.temp=t,this.dialogFormVisible=!0},handleClickSubmit:function(){var t=this;(function(t){return Object(a.a)({url:"/api/a1/awards/"+t.id,method:"put",data:t})})(this.temp).then(function(e){t.$emit("update-success"),t.dialogFormVisible=!1})}}},u=Object(n.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"新增奖品",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"名称"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"价格"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.price,callback:function(e){t.$set(t.temp,"price",e)},expression:"temp.price"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"兑换标准"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.minCondition,callback:function(e){t.$set(t.temp,"minCondition",e)},expression:"temp.minCondition"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"有效天数"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:""},model:{value:t.temp.validDays,callback:function(e){t.$set(t.temp,"validDays",e)},expression:"temp.validDays"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"简介"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea"},model:{value:t.temp.description,callback:function(e){t.$set(t.temp,"description",e)},expression:"temp.description"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);u.options.__file="edit_award.vue";var m=u.exports,p={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",temp:{id:void 0,name:void 0,imageLogoUrl:void 0},asset_id:void 0,actionUrl:"/api/common/uploads",imageLogoUrl:void 0,data_logo:{asset_type:"AwardLogo"}}},created:function(){},methods:{handleClickCancel:function(){this.dialogFormVisible=!1},show:function(t){this.temp=t,this.imageLogoUrl=t.logo,this.dialogFormVisible=!0},handleClickSubmit:function(){var t=this;(function(t){return Object(a.a)({url:"/api/a1/awards/change_logo",method:"get",params:t})})({id:this.temp.id,asset_id:this.asset_id}).then(function(e){t.asset_id=void 0,t.imageLogoUrl=void 0,t.$emit("update-success"),t.dialogFormVisible=!1})},handleLogoSuccess:function(t,e){console.log("上传之后 => ",t),this.asset_id=t.data.id,this.imageLogoUrl=t.data.url},beforeLogoUpload:function(t){console.log("上传之前。。")}}},h=Object(n.a)(p,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"配置图片",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"名称"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",disabled:""},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,label:"Logo图"}},[i("el-upload",{attrs:{"show-file-list":!1,"on-success":t.handleLogoSuccess,"before-upload":t.beforeLogoUpload,action:t.actionUrl,data:t.data_logo}},[t.imageLogoUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageLogoUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleClickCancel}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);h.options.__file="edit_logo.vue";var f=h.exports,b={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",award_id:void 0,temp:{id:void 0,name:void 0},fileList:[],asset_ids:[],data_banner:{asset_type:"AwardBanner"}}},created:function(){},methods:{submitUpload:function(){this.$refs.upload.submit()},show:function(t){var e=this;this.temp=t,this.award_id=t.id,this.asset_ids=[],o({id:t.id,type:"banner"}).then(function(t){e.fileList=t.data,e.fileList.forEach(function(t){e.asset_ids.push(t.id)}),e.dialogFormVisible=!0})},handleClickSubmit:function(){var t=this;l({id:this.award_id,asset_ids:this.asset_ids,type:"banner"}).then(function(e){t.resetData()})},resetData:function(){this.award_id=void 0,this.temp={id:void 0,name:void 0},this.fileList=[],this.asset_ids=[],this.dialogFormVisible=!1},handlePreview:function(t){console.log("file => ",t)},handleRemove:function(t,e){var i=this.asset_ids.indexOf(t.id);i>-1&&this.asset_ids.splice(i,1),console.log("asset_ids => ",this.asset_ids)},handleChange:function(t,e){console.log("handleChange.")},handleSuccess:function(t,e){this.asset_ids.push(t.data.id),console.log("上传成功。asset_ids => ",this.asset_ids)}}},v=Object(n.a)(b,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"配置图片",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"名称"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",disabled:""},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"Banner图"}},[i("el-upload",{ref:"upload",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-change":t.handleChange,data:t.data_banner,"auto-upload":!1,"file-list":t.fileList,"list-type":"picture",action:"/api/common/uploads"}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.resetData}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);v.options.__file="edit_banner.vue";var _=v.exports,g={data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",award_id:void 0,temp:{id:void 0,name:void 0},fileList:[],asset_ids:[],data_banner:{asset_type:"AwardPicture"}}},created:function(){},methods:{submitUpload:function(){this.$refs.upload.submit()},show:function(t){var e=this;this.temp=t,this.award_id=t.id,this.asset_ids=[],o({id:t.id,type:"picture"}).then(function(t){e.fileList=t.data,e.fileList.forEach(function(t){e.asset_ids.push(t.id)}),e.dialogFormVisible=!0})},handleClickSubmit:function(){var t=this;l({id:this.award_id,asset_ids:this.asset_ids,type:"picture"}).then(function(e){t.resetData()})},resetData:function(){this.award_id=void 0,this.temp={id:void 0,name:void 0},this.fileList=[],this.asset_ids=[],this.dialogFormVisible=!1},handlePreview:function(t){console.log("file => ",t)},handleRemove:function(t,e){var i=this.asset_ids.indexOf(t.id);i>-1&&this.asset_ids.splice(i,1),console.log("asset_ids => ",this.asset_ids)},handleChange:function(t,e){console.log("handleChange.")},handleSuccess:function(t,e){this.asset_ids.push(t.data.id),console.log("上传成功。asset_ids => ",this.asset_ids)}}},w=Object(n.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"配置详情图片",width:"70%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:t.temp}},[i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"名称"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",disabled:""},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{"label-width":t.formLabelWidth,prop:"title",label:"详情图"}},[i("el-upload",{ref:"upload",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-change":t.handleChange,data:t.data_banner,"auto-upload":!1,"file-list":t.fileList,"list-type":"picture",action:"/api/common/uploads"}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.resetData}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);w.options.__file="edit_picture.vue";var y={components:{NewAward:d,EditAward:m,EditLogo:f,EditBanner:_,EditPicture:w.exports},data:function(){return{list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,name:void 0,phone:void 0,email:void 0,startDate:void 0,endDate:void 0,type:void 0,sortProp:void 0,sortOrder:void 0}}},created:function(){this.getList()},methods:{handleClickEdit:function(t){this.$refs.edit_award.show(t)},handleClickEditLogo:function(t){this.$refs.edit_logo.show(t)},handleClickEditBanner:function(t){this.$refs.edit_banner.show(t)},handleClickEditPicture:function(t){this.$refs.edit_picture.show(t)},handleClickNew:function(){this.$refs.new_award.show()},handleClick:function(t){},handleClickDelete:function(t){},getList:function(){var t=this;(function(t){return Object(a.a)({url:"/api/a1/awards",method:"get",params:t})})(this.listQuery).then(function(e){t.list=e.data.items,t.total=e.data.total,setTimeout(function(){t.listLoading=!1},1500)})},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleColumnSort:function(t){this.listQuery.sortProp=t.prop,this.listQuery.sortOrder=t.order,this.getList()},handleFilter:function(){this.getList()},handleFilterClear:function(){this.listQuery.name="",this.listQuery.phone="",this.listQuery.email="",this.listQuery.startDate="",this.listQuery.endDate=""}}},k=Object(n.a)(y,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("奖品管理")])]),t._v(" "),i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.handleClickNew}},[t._v("新增")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,border:""},on:{"sort-change":t.handleColumnSort}},[i("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"90"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"名称","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleClickEdit(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleClickEditLogo(e.row)}}},[t._v("设置Logo")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleClickEditBanner(e.row)}}},[t._v("设置Banner")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleClickEditPicture(e.row)}}},[t._v("设置Picture")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.handleClickDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),i("NewAward",{ref:"new_award",on:{"create-success":t.getList}}),t._v(" "),i("EditAward",{ref:"edit_award",on:{"update-success":t.getList}}),t._v(" "),i("EditLogo",{ref:"edit_logo",on:{"update-success":t.getList}}),t._v(" "),i("EditBanner",{ref:"edit_banner",on:{"update-success":t.getList}}),t._v(" "),i("EditPicture",{ref:"edit_picture",on:{"update-success":t.getList}})],1)},[],!1,null,null,null);k.options.__file="awards.vue";e.default=k.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5040"],{"4iEu":function(t,e,n){"use strict";var a=n("kzxr");n.n(a).a},Lcds:function(t,e){t.exports="data:image/png;base64,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"},"SF+J":function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"b",function(){return l}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return c}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return d}),n.d(e,"i",function(){return u}),n.d(e,"f",function(){return h});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/a1/children",method:"get",params:t})}function l(t){return Object(a.a)({url:"/api/a1/children/"+t.id,method:"get"})}function o(t){return Object(a.a)({url:"/api/a1/children/with_equipment",method:"get",params:t})}function r(t){return Object(a.a)({url:"/api/a1/children/index_en",method:"get",params:t})}function c(t){return Object(a.a)({url:"/api/a1/children",method:"post",data:t})}function s(t){return Object(a.a)({url:"/api/a1/children/"+t.id+"/unbind_doctor",method:"get"})}function d(t){return Object(a.a)({url:"/api/a1/children/"+t.id,method:"put",data:t})}function u(t){return Object(a.a)({url:"/api/a1/children/update_tags",method:"put",data:t})}function h(t){return console.log("query => ",t),Object(a.a)({url:"/api/a1/children/self_index",method:"get",params:t})}},ZvUQ:function(t,e,n){"use strict";var a=n("xttN"),i=n("Lcds"),l=n.n(i),o={data:function(){return{dialogTemplateVisible:!1,childId:void 0,dialogVisible:!1,formLabelWidth:"100px",content:"",data:[],merchantName:"",childName:"",avatar:l.a,channelId:void 0}},created:function(){},methods:{initCable:function(){var t=this;this.channel=this.$cable.subscriptions.create({channel:"AdminUserLogsChannel",channel_id:this.channelId},{connected:function(){console.log("client connected to server!")},disconnected:function(){console.log("client disconnected from server!")},received:function(e){console.log("data => ",e),t.data.push(e)}})},handleTemplateShow:function(){this.dialogTemplateVisible=!0},handlerClickCancel:function(){this.dialogVisible=!1},getData:function(){var t=this;Object(a.c)({child_id:this.childId}).then(function(e){t.merchantName=e.data.merchantName,t.childName=e.data.childName,t.data=e.data.items,t.channelId=e.data.channelId})},handleShow:function(t){this.childId=t,this.getData(),this.initCable(),this.dialogVisible=!0},handleClickSubmit:function(){var t=this;console.log("提交"),this.content&&Object(a.b)({child_id:this.childId,content:this.content}).then(function(e){t.data=e.data.items,t.merchantName=e.data.merchantName,t.childName=e.data.childName,t.content=""})}}},r=(n("4iEu"),n("KHd+")),c=Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{visible:t.dialogVisible,modal:!0,"close-on-click-modal":!1,title:"聊天",width:"60%",top:"30px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticStyle:{height:"600px","overflow-y":"scroll",padding:"20px","background-color":"rgba(196,196,196,0.23)"}},t._l(t.data,function(e){return n("el-row",{key:e.id,staticClass:"chat-con",style:{textAlign:"merchant"===e.source?"right":"left"},attrs:{gutter:20}},[n("div",{class:"merchant"===e.source?"header-logr":"header-logl"},[n("img",{attrs:{src:t.avatar,alt:""}})]),t._v(" "),n("p",{staticClass:"chat-title"},[t._v(t._s("merchant"===e.source?t.merchantName:t.childName)+"  "),n("span",{staticClass:"chat-time"},[t._v(t._s(e.createdAt))])]),t._v(" "),n("div",{class:"merchant"===e.source?"chat-info":"chat-infol"},[n("span",[t._v(t._s(e.content))]),t._v(" "),n("img",{attrs:{src:e.thumbUrl,alt:""}})])])})),t._v(" "),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"warning",size:"small",round:""},on:{click:t.handleTemplateShow}},[t._v("随访模板")]),t._v(" "),n("el-input",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{autosize:{minRows:4,maxRows:8},type:"textarea"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.handlerClickCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("发送")])],1)],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogTemplateVisible,title:"模板消息",width:"50%"},on:{"update:visible":function(e){t.dialogTemplateVisible=e}}},[n("div",[n("h3",[t._v("亲爱的家长，娃的眼睛该复查啦！")]),t._v(" "),n("span",[t._v("请您携带病历等资料，在一周内带孩子去预约复查。")]),t._v(" "),n("h3",[t._v("亲爱的家长，该回来同步数据啦！")]),t._v(" "),n("span",[t._v("您已经很久没给孩子同步数据了~建议您三天同步一次数据，即可领取个性定制的近视防控方案。")]),t._v(" "),n("h3",[t._v("根据大数据分析预测，近期孩子的近视风险较高！")]),t._v(" "),n("span",[t._v("近期监测到孩子用眼行为较差，建议及时预约复查，以便尽早遏制近视风险。")]),t._v(" "),n("h3",[t._v("根据大数据分析预测，近期孩子有近视加深的可能！")]),t._v(" "),n("span",[t._v("为避免孩子近视进一步加深，请根据用眼报告的改善意见指导孩子，为了孩子的光明未来请加油！")]),t._v(" "),n("h3",[t._v("根据大数据监测分析，近期孩子用眼行为很棒！")]),t._v(" "),n("span",[t._v("近期孩子日常用眼行为评分为优，近视加深风险偏低。良好的习惯受用一生，请给孩子一个爱的鼓励！")])]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogTemplateVisible=!1}}},[t._v("确    定")])],1)])],1)},[],!1,null,"2952e2f7",null);c.options.__file="channel.vue";e.a=c.exports},gB3A:function(t,e,n){"use strict";n.r(e);var a=n("SF+J"),i={components:{Channel:n("ZvUQ").a},data:function(){return{list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,name:"",phone:void 0,start_date:"",end_date:"",sort_prop:"",sort_order:""}}},created:function(){this.getList()},methods:{handleClickChannel:function(t){t&&this.$refs.channel.handleShow(t.id)},getList:function(){var t=this;Object(a.e)(this.listQuery).then(function(e){t.list=e.data.items,t.total=e.data.total,setTimeout(function(){t.listLoading=!1},1500)})},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleColumnSort:function(t){this.listQuery.sort_prop=t.prop,this.listQuery.sort_order=t.order,this.getList()},handleFilter:function(){this.getList()},handleFilterClear:function(){this.listQuery.name="",this.listQuery.parentPhone="",this.listQuery.startDate="",this.listQuery.endDate=""}}},l=n("KHd+"),o=Object(l.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(t.generateShow("common.all_children")))])]),t._v(" "),n("el-row",[t._v("\n      "+t._s(t.generateShow("common.name"))+":\n      "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{label:t.generateShow("common.name"),placeholder:t.generateShow("common.name"),clearable:""},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v("\n      "+t._s(t.generateShow("common.phone"))+":\n      "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{label:t.generateShow("common.phone"),placeholder:t.generateShow("common.phone"),clearable:""},model:{value:t.listQuery.phone,callback:function(e){t.$set(t.listQuery,"phone",e)},expression:"listQuery.phone"}}),t._v("\n      "+t._s(t.generateShow("common.created_at"))+":\n      "),n("el-date-picker",{staticStyle:{width:"150px"},attrs:{placeholder:t.generateShow("common.start_date"),type:"date"},model:{value:t.listQuery.startDate,callback:function(e){t.$set(t.listQuery,"startDate",e)},expression:"listQuery.startDate"}}),t._v(" -\n      "),n("el-date-picker",{staticStyle:{width:"150px"},attrs:{placeholder:t.generateShow("common.end_date"),type:"date"},model:{value:t.listQuery.endDate,callback:function(e){t.$set(t.listQuery,"endDate",e)},expression:"listQuery.endDate"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(t._s(t.generateShow("common.search")))]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:t.handleFilterClear}},[t._v(t._s(t.generateShow("common.clear")))])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,border:""},on:{"sort-change":t.handleColumnSort}},[n("el-table-column",{attrs:{label:t.generateShow("common.name"),"min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:"/preview/child/"+e.row.id}},[n("el-button",{attrs:{type:"text",size:"small"}},[t._v(t._s(e.row.name))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.age"),prop:"age","min-width":"40"}}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.gender"),prop:"gender",sortable:"","min-width":"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"}},[t._v(t._s(t._f("genderFilter")(e.row.gender)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.location"),prop:"location_string","min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.phone"),prop:"phone","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.created_at"),prop:"created_at",sortable:"","min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{label:t.generateShow("common.operate"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.handleClickChannel(e.row)}}},[t._v(t._s(t.generateShow("common.contact_user")))])]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),n("Channel",{ref:"channel"})],1)},[],!1,null,null,null);o.options.__file="allchildren.vue";e.default=o.exports},kzxr:function(t,e,n){},xttN:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"b",function(){return l}),n.d(e,"a",function(){return o});var a=n("t3Un");function i(t){return Object(a.a)({url:"/api/a1/channel_logs",method:"get",params:t})}function l(t){return Object(a.a)({url:"/api/a1/channel_logs",method:"post",data:t})}function o(t){return Object(a.a)({url:"/api/a1/channel_logs/create_group",method:"post",data:t})}}}]);
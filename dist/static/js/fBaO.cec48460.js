(window.webpackJsonp=window.webpackJsonp||[]).push([["fBaO"],{fBaO:function(e,t,i){"use strict";i.r(t);var l=i("P2sY"),a=i.n(l),n=i("t3Un");var o=[{key:1,value:"检查类套餐"},{key:2,value:"验配类"},{key:3,value:"视功能训练类"},{key:4,value:"调节或集合训练仪器"},{key:5,value:"护理液"}],s={props:{dialogVisible:{type:Boolean,default:!0}},data:function(){return{uploadUrl:"/api/common/uploads/common",formLabelWidth:"120px",kinds:o,temp:{logo_url:void 0,content_url:void 0,name:void 0,kind:void 0,akeso_coin:void 0,origin_price:void 0},loading:!1}},created:function(){},methods:{uploadLogoSuccess:function(e,t){this.temp.logo_url=e.data.url},uploadContentuccess:function(e,t){this.temp.content_url=e.data.url},handleClickCancel:function(){this.$emit("hidden",!1)},handleClickSubmit:function(){var e=this;(function(e){return Object(n.a)({url:"/api/a1/coin_products",method:"post",data:e})})(this.temp).then(function(t){e.$emit("hidden",!0)})}}},r=i("KHd+"),c=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,modal:!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,title:"新增机构/医生账号",width:"70%",top:"30px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{staticStyle:{width:"90%","margin-left":"20px"}},[i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"套餐类别"}},[i("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择"},model:{value:e.temp.kind,callback:function(t){e.$set(e.temp,"kind",t)},expression:"temp.kind"}},e._l(e.kinds,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"name",label:"名称"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"机构/医生名称"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"兑换积分"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{clearable:"",placeholder:"0"},model:{value:e.temp.akeso_coin,callback:function(t){e.$set(e.temp,"akeso_coin",t)},expression:"temp.akeso_coin"}}),e._v("积分\n    ")],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"原价"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:e.temp.origin_price,callback:function(t){e.$set(e.temp,"origin_price",t)},expression:"temp.origin_price"}}),e._v("元\n    ")],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"产品图片"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.uploadLogoSuccess}},[e.temp.logo_url?i("img",{staticClass:"avatar",attrs:{src:e.temp.logo_url}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"产品详情图"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.uploadContentuccess}},[e.temp.content_url?i("img",{staticClass:"avatar",attrs:{src:e.temp.content_url}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handleClickCancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v("确 定")])],1)],1)},[],!1,null,null,null);c.options.__file="new.vue";var d=c.exports,u=[{key:1,value:"检查类套餐"},{key:2,value:"验配类"},{key:3,value:"视功能训练类"},{key:4,value:"调节或集合训练仪器"},{key:5,value:"护理液"}],m={props:{dialogVisible:{type:Boolean,default:!0},item:{type:Object,default:function(){return{}}}},data:function(){return{formLabelWidth:"100px",kinds:u,temp:{id:this.item.id,kind:this.item.kind,name:this.item.name,akeso_coin:this.item.akeso_coin,origin_price:this.item.origin_price}}},methods:{handlerClickCancel:function(){this.$emit("hidden",!1)},handleClickSubmit:function(){var e=this;this.$confirm("确定修改该信息吗？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return Object(n.a)({url:"/api/a1/coin_products/"+e.id,method:"put",data:e})})(e.temp).then(function(t){e.$emit("hidden",!0),e.$message({type:"success",message:"修改成功!"})})}).catch(function(){})}}},p=Object(r.a)(m,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.dialogVisible,modal:!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,title:"修改医生信息",width:"70%",top:"30px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:e.temp}},[i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"套餐类别"}},[i("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择"},model:{value:e.temp.kind,callback:function(t){e.$set(e.temp,"kind",t)},expression:"temp.kind"}},e._l(e.kinds,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"name",label:"名称"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{autocomplete:"off",clearable:"",placeholder:"机构/医生名称"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"兑换积分"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{clearable:"",placeholder:"0"},model:{value:e.temp.akeso_coin,callback:function(t){e.$set(e.temp,"akeso_coin",t)},expression:"temp.akeso_coin"}}),e._v("积分\n    ")],1),e._v(" "),i("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"原价"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:e.temp.origin_price,callback:function(t){e.$set(e.temp,"origin_price",t)},expression:"temp.origin_price"}}),e._v("元\n    ")],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.handlerClickCancel}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v("提交")])],1)],1)},[],!1,null,null,null);p.options.__file="edit.vue";var h={components:{New:d,Edit:p.exports},data:function(){return{newDoctorVisible:!1,editDoctorVisible:!1,currentItem:void 0,list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,name:void 0}}},created:function(){this.getList()},methods:{hideChangeEmit:function(e){e&&this.getList(),this.newDoctorVisible=!1,this.editDoctorVisible=!1},handleCurrentSelect:function(e){this.currentItem=e},handleClickEdit:function(){this.currentItem?this.editDoctorVisible=!0:this.$message({type:"warning",message:"请先选择一项进行操作!"})},handleClickNew:function(){this.newDoctorVisible=!0},handleClickDelete:function(){var e=this;this.currentItem?this.$confirm("确认删除该条信息?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){(function(e){return Object(n.a)({url:"/api/a1/coin_products/"+e.id,method:"delete",data:e})})({id:e.currentItem.id}).then(function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){}):this.$message({type:"warning",message:"请先选择一项进行操作!"})},getList:function(){var e=this;"agent"===this.$store.getters.baseType&&a()(this.listQuery,{agent_id:this.$store.getters.id}),function(e){return Object(n.a)({url:"/api/a1/coin_products",method:"get",params:e})}(this.listQuery).then(function(t){e.list=t.data.items,e.total=t.data.total,setTimeout(function(){e.listLoading=!1},1500)})},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleFilter:function(){this.getList()},handleFilterClear:function(){this.listQuery.name="",this.listQuery.phone="",this.listQuery.email=""}}},f=Object(r.a)(h,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("产品管理")])]),e._v(" "),i("div",{staticClass:"filter-container"},[e._v("\n      名称：\n      "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:e.generateShow("common.name_field"),size:"mini",label:"名称",clearable:""},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:e.handleClickNew}},[e._v("新增")]),e._v(" "),i("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:e.handleClickEdit}},[e._v("修改")]),e._v(" "),i("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:e.handleClickDelete}},[e._v("删除")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,border:"","highlight-current-row":""},on:{"current-change":e.handleCurrentSelect}},[i("el-table-column",{attrs:{label:"名称",prop:"name","min-width":"90"}}),e._v(" "),i("el-table-column",{attrs:{label:"类别",prop:"kind","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"兑换积分",prop:"akeso_coin","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"原价(元)",prop:"origin_price","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",prop:"created_at","min-width":"120"}})],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.newDoctorVisible?i("New",{attrs:{"dialog-visible":e.newDoctorVisible},on:{hidden:e.hideChangeEmit}}):e._e(),e._v(" "),e.editDoctorVisible?i("Edit",{attrs:{"dialog-visible":e.editDoctorVisible,item:e.currentItem},on:{hidden:e.hideChangeEmit}}):e._e()],1)},[],!1,null,null,null);f.options.__file="products.vue";t.default=f.exports}}]);
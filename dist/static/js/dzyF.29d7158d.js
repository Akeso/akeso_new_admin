(window.webpackJsonp=window.webpackJsonp||[]).push([["dzyF"],{dzyF:function(e,t,l){"use strict";l.r(t);var a=l("t3Un");var i=[{key:"male",display_name:"男"},{key:"female",display_name:"女"}],o={filters:{genderFilter:function(e){return{male:"男",female:"女",unknown:"未知"}[e]}},data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",temp:{parent_name:void 0,phone:void 0,child_name:void 0,gender:void 0,birthday:void 0,ucva_od:void 0,ucva_os:void 0,wear_eyesight_od:void 0,wear_eyesight_os:void 0,sph_od:void 0,cyl_od:void 0,axial_od:void 0,sph_os:void 0,cyl_os:void 0,axial_os:void 0},genderOptions:i,num_values:[1,2,3,4,5,6,7,8,9,10],loading:!1}},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var e=this;(function(e){return Object(a.a)({url:"/api/a1/simple_archives",method:"post",data:e})})(this.temp).then(function(t){e.resetData(),e.dialogFormVisible=!1,e.$emit("create-success")})},show:function(){this.dialogFormVisible=!0},resetData:function(){this.temp={parent_name:void 0,phone:void 0,child_name:void 0,gender:void 0,birthday:void 0,ucva_od:void 0,ucva_os:void 0,wear_eyesight_od:void 0,wear_eyesight_os:void 0}}}},n=l("KHd+"),s=Object(n.a)(o,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{visible:e.dialogFormVisible,"close-on-click-modal":!1,title:"新增筛查",width:"70%",top:"30px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:e.temp}},[l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"parent_name",label:"家长姓名"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:e.temp.parent_name,callback:function(t){e.$set(e.temp,"parent_name",t)},expression:"temp.parent_name"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"phone",label:"联系电话"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"child_name",label:"儿童姓名"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:e.temp.child_name,callback:function(t){e.$set(e.temp,"child_name",t)},expression:"temp.child_name"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"孩子性别",prop:"gender"}},[l("el-select",{staticClass:"filter-item",model:{value:e.temp.gender,callback:function(t){e.$set(e.temp,"gender",t)},expression:"temp.gender"}},e._l(e.genderOptions,function(e){return l("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}))],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"出生年月日",prop:"birthday"}},[l("el-date-picker",{attrs:{type:"date",format:"yyyy年 MM月 dd日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.temp.birthday,callback:function(t){e.$set(e.temp,"birthday",t)},expression:"temp.birthday"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"裸眼视力(5分法)"}},[e._v("\n      左眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.ucva_os,callback:function(t){e.$set(e.temp,"ucva_os",t)},expression:"temp.ucva_os"}}),e._v("\n      右眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.ucva_od,callback:function(t){e.$set(e.temp,"ucva_od",t)},expression:"temp.ucva_od"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"戴镜视力(5分法)"}},[e._v("\n      左眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.wear_eyesight_os,callback:function(t){e.$set(e.temp,"wear_eyesight_os",t)},expression:"temp.wear_eyesight_os"}}),e._v("\n      右眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.wear_eyesight_od,callback:function(t){e.$set(e.temp,"wear_eyesight_od",t)},expression:"temp.wear_eyesight_od"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"电脑验光"}},[e._v("\n      右眼球镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.sph_od,callback:function(t){e.$set(e.temp,"sph_od",t)},expression:"temp.sph_od"}}),e._v("\n      右眼柱镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.cyl_od,callback:function(t){e.$set(e.temp,"cyl_od",t)},expression:"temp.cyl_od"}}),e._v("\n      右眼轴向："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.axial_od,callback:function(t){e.$set(e.temp,"axial_od",t)},expression:"temp.axial_od"}}),e._v(" "),l("p",[e._v("\n        左眼球镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.sph_os,callback:function(t){e.$set(e.temp,"sph_os",t)},expression:"temp.sph_os"}}),e._v("\n        左眼柱镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.cyl_os,callback:function(t){e.$set(e.temp,"cyl_os",t)},expression:"temp.cyl_os"}}),e._v("\n        左眼轴向："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.axial_os,callback:function(t){e.$set(e.temp,"axial_os",t)},expression:"temp.axial_os"}})],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.handleClickCancel}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v("确 定")])],1)],1)},[],!1,null,null,null);s.options.__file="new_simple_archive.vue";var r=s.exports,c=[{key:"male",display_name:"男"},{key:"female",display_name:"女"}],d={filters:{genderFilter:function(e){return{male:"男",female:"女",unknown:"未知"}[e]}},data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",temp:{id:void 0,parent_name:void 0,phone:void 0,child_name:void 0,gender:void 0,birthday:void 0,ucva_od:void 0,ucva_os:void 0,wear_eyesight_od:void 0,wear_eyesight_os:void 0,sph_od:void 0,cyl_od:void 0,axial_od:void 0,sph_os:void 0,cyl_os:void 0,axial_os:void 0},genderOptions:c,num_values:[1,2,3,4,5,6,7,8,9,10],loading:!1}},created:function(){},methods:{handleClickCancel:function(){this.resetData(),this.dialogFormVisible=!1},handleClickSubmit:function(){var e=this;(function(e){return Object(a.a)({url:"/api/a1/simple_archives/"+e.id,method:"put",data:e})})(this.temp).then(function(t){e.resetData(),e.dialogFormVisible=!1,e.$emit("update-success")})},show:function(e){this.temp=e,this.dialogFormVisible=!0},resetData:function(){this.temp={parent_name:void 0,phone:void 0,child_name:void 0,gender:void 0,birthday:void 0,ucva_od:void 0,ucva_os:void 0,wear_eyesight_od:void 0,wear_eyesight_os:void 0}}}},p=Object(n.a)(d,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{visible:e.dialogFormVisible,"close-on-click-modal":!1,title:"新增筛查",width:"70%",top:"30px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{staticStyle:{width:"90%","margin-left":"20px"},attrs:{model:e.temp}},[l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"parent_name",label:"家长姓名"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:e.temp.parent_name,callback:function(t){e.$set(e.temp,"parent_name",t)},expression:"temp.parent_name"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"phone",label:"联系电话"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{disabled:""},model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"child_name",label:"儿童姓名"}},[l("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:e.temp.child_name,callback:function(t){e.$set(e.temp,"child_name",t)},expression:"temp.child_name"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"孩子性别",prop:"gender"}},[l("el-select",{staticClass:"filter-item",model:{value:e.temp.gender,callback:function(t){e.$set(e.temp,"gender",t)},expression:"temp.gender"}},e._l(e.genderOptions,function(e){return l("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}))],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"出生年月日",prop:"birthday"}},[l("el-date-picker",{attrs:{type:"date",format:"yyyy年 MM月 dd日","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.temp.birthday,callback:function(t){e.$set(e.temp,"birthday",t)},expression:"temp.birthday"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"裸眼视力(5分法)"}},[e._v("\n      左眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.ucva_os,callback:function(t){e.$set(e.temp,"ucva_os",t)},expression:"temp.ucva_os"}}),e._v("\n      右眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.ucva_od,callback:function(t){e.$set(e.temp,"ucva_od",t)},expression:"temp.ucva_od"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"戴镜视力(5分法)"}},[e._v("\n      左眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.wear_eyesight_os,callback:function(t){e.$set(e.temp,"wear_eyesight_os",t)},expression:"temp.wear_eyesight_os"}}),e._v("\n      右眼："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.wear_eyesight_od,callback:function(t){e.$set(e.temp,"wear_eyesight_od",t)},expression:"temp.wear_eyesight_od"}})],1),e._v(" "),l("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"电脑验光"}},[e._v("\n      右眼球镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.sph_od,callback:function(t){e.$set(e.temp,"sph_od",t)},expression:"temp.sph_od"}}),e._v("\n      右眼柱镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.cyl_od,callback:function(t){e.$set(e.temp,"cyl_od",t)},expression:"temp.cyl_od"}}),e._v("\n      右眼轴向："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.axial_od,callback:function(t){e.$set(e.temp,"axial_od",t)},expression:"temp.axial_od"}}),e._v(" "),l("p",[e._v("\n        左眼球镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.sph_os,callback:function(t){e.$set(e.temp,"sph_os",t)},expression:"temp.sph_os"}}),e._v("\n        左眼柱镜："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.cyl_os,callback:function(t){e.$set(e.temp,"cyl_os",t)},expression:"temp.cyl_os"}}),e._v("\n        左眼轴向："),l("el-input",{staticStyle:{width:"15%"},attrs:{clearable:""},model:{value:e.temp.axial_os,callback:function(t){e.$set(e.temp,"axial_os",t)},expression:"temp.axial_os"}})],1)],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.handleClickCancel}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.handleClickSubmit}},[e._v("确 定")])],1)],1)},[],!1,null,null,null);p.options.__file="edit_simple_archive.vue";var m={components:{NewSimpleArchive:r,EditSimpleArchive:p.exports},filters:{genderFilter:function(e){return{male:"男",female:"女",unknown:"未知"}[e]}},data:function(){return{uploadData:{authenticationToken:this.$store.state.user.authenticationToken},list:null,total:null,listLoading:!0,listQuery:{examine_id:this.$route.query.examine_id,page:1,limit:20,importance:void 0,name:void 0,phone:void 0,email:void 0,type:void 0,sort_prop:void 0,sort_order:void 0}}},created:function(){this.getList()},methods:{downloadExc:function(){window.location.href="https://akeso.com.cn/template/roster_template.xlsx"},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleSuccess:function(e,t){console.log("res => ",e),console.log("file => ",t)},handleClickEdit:function(e){this.$refs.edit_simple_archive.show(e)},handleClickNew:function(){this.$refs.new_simple_archive.show()},handleClickDelete:function(e){var t=this;this.$confirm("确认删除该条筛查?","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){(function(e){return Object(a.a)({url:"/api/a1/simple_archives/"+e.id,method:"delete"})})({id:e.id}).then(function(e){t.getList(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){})},getList:function(){var e=this;(function(e){return Object(a.a)({url:"/api/a1/simple_archives",method:"get",params:e})})(this.listQuery).then(function(t){e.list=t.data.items,e.total=t.data.total,setTimeout(function(){e.listLoading=!1},1500)})},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleColumnSort:function(e){this.listQuery.sort_prop=e.prop,this.listQuery.sort_order=e.order,this.getList()},handleFilter:function(){this.getList()},handleFilterClear:function(){this.listQuery.name="",this.listQuery.phone="",this.listQuery.email=""}}},u=Object(n.a)(m,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-card",{staticClass:"box-card"},[l("el-row",[l("el-upload",{staticClass:"upload-demo",attrs:{"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,limit:1,data:e.uploadData,accept:".xlsx, .xls",action:"/api/common/excels/upload_rosters"}},[l("div",{staticClass:"overflow"},[l("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.handleClickNew(t)}}},[e._v("新增")]),e._v(" "),l("el-button",{staticClass:"left",attrs:{size:"small",type:"primary"}},[e._v("上传Excel")]),e._v(" "),l("el-button",{staticClass:"left m-l-2",attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.downloadExc(t)}}},[e._v("下载Excel模板")])],1)])],1),e._v(" "),l("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,border:""},on:{"sort-change":e.handleColumnSort}},[l("el-table-column",{attrs:{label:"姓名",prop:"child_name","min-width":"90"}}),e._v(" "),l("el-table-column",{attrs:{label:"性别","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("genderFilter")(t.row.gender))+"\n        ")]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"右眼视力",prop:"ucva_od","min-width":"90"}}),e._v(" "),l("el-table-column",{attrs:{label:"左眼视力",prop:"ucva_os","min-width":"90"}}),e._v(" "),l("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(l){e.handleClickEdit(t.row)}}},[e._v("编辑")]),e._v(" "),l("el-button",{attrs:{type:"success",size:"small"},on:{click:function(l){e.handleClickDelete(t.row)}}},[e._v("查看")]),e._v(" "),l("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(l){e.handleClickDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),l("NewSimpleArchive",{ref:"new_simple_archive",on:{"create-success":e.getList}}),e._v(" "),l("EditSimpleArchive",{ref:"edit_simple_archive",on:{"update-success":e.getList}})],1)},[],!1,null,null,null);u.options.__file="simple_archives.vue";t.default=u.exports}}]);
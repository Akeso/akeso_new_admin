(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f478"],{AtT7:function(t,e,n){"use strict";var a=n("B055");n.n(a).a},B055:function(t,e,n){},Hv8Z:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return i});var a=n("t3Un");function l(t){return Object(a.a)({url:"/api/a1/summaries/whole",method:"get",params:t})}function i(t){return Object(a.a)({url:"/api/a1/summaries/sorting",method:"get",params:t})}},ZYYJ:function(t,e,n){"use strict";n.r(e);var a=n("Hv8Z"),l=n("xttN"),i={data:function(){return{dialogVisible:!1,formLabelWidth:"100px",content:"",childIds:[]}},created:function(){},methods:{handlerClickCancel:function(){this.content="",this.dialogVisible=!1},handleShow:function(t){this.childIds=t,this.dialogVisible=!0},handleClickSubmit:function(){var t=this;this.content&&Object(l.a)({child_ids:this.childIds,content:this.content}).then(function(e){t.content="",t.dialogVisible=!1})}}},o=(n("f7xa"),n("KHd+")),s=Object(o.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{visible:t.dialogVisible,modal:!0,"close-on-click-modal":!1,title:"聊天",width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-input",{attrs:{autosize:{minRows:6,maxRows:10},type:"textarea"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.handlerClickCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleClickSubmit}},[t._v("发送")])],1)],1)},[],!1,null,"36e692d8",null);s.options.__file="group_channel.vue";var r=[{key:"healthIndex",label:"健康评分"},{key:"wearTime",label:"戴镜时间"},{key:"outTime",label:"户外时间"},{key:"luxDay",label:"阳光摄入"},{key:"stepCount",label:"步数"},{key:"nearworkDay",label:"近距离用眼时间"},{key:"nearworkBurdenDay",label:"用眼负荷"},{key:"badPostureTimes",label:"不良姿势提醒"}],c=["healthIndex","wearTime","outTime","luxDay","nearworkDay","nearworkBurdenDay","badPostureTimes","stepCount"],u={components:{group_channel:s.exports},data:function(){return{checkAll:!0,checkedOptions:c,options:r,isIndeterminate:!1,list:null,total:null,todayCount:0,listLoading:!0,listQuery:{page:1,limit:20,importance:void 0,startDate:new Date,endDate:new Date,sortProp:"",sortOrder:""},multipleSelection:[]}},created:function(){this.getList()},methods:{handleClickSendMessages:function(){if(0!==this.multipleSelection.length){var t=this.multipleSelection.map(function(t){return t.childId});console.log("批量发送消息 => ",t),this.$refs.group_channel.handleShow(t)}else this.$message({message:"请选择要批量发送的用户！",type:"warning"})},handleSelectionChange:function(t){this.multipleSelection=t},handleFilter:function(){this.getList()},getList:function(){var t=this;Object(a.a)(this.listQuery).then(function(e){t.list=e.data.items,t.total=e.data.total})},hasOptions:function(t){return this.checkedOptions.indexOf(t)>-1},handleColumnSort:function(t){this.listQuery.sortProp=t.prop,this.listQuery.sortOrder=t.order,this.getList()},handleCheckAllChange:function(t){this.checkedOptions=t?c:[],this.isIndeterminate=!1},handleCheckedOptionsChange:function(t){var e=t.length;this.checkAll=e===this.options.length,this.isIndeterminate=e>0&&e<this.options.length},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()}}},d=(n("AtT7"),Object(o.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-card",{attrs:{"body-style":{padding:"0px 10px 10px 20px"}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("智能排序")])]),t._v(" "),n("el-card",{attrs:{"body-style":{padding:"5px 10px 10px 20px"}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("设置显示字段")])]),t._v(" "),n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),t._v(" "),n("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),n("el-checkbox-group",{on:{change:t.handleCheckedOptionsChange},model:{value:t.checkedOptions,callback:function(e){t.checkedOptions=e},expression:"checkedOptions"}},t._l(t.options,function(e){return n("el-checkbox",{key:e.key,attrs:{label:e.key}},[t._v(t._s(e.label))])}))],1),t._v(" "),n("el-row",{staticStyle:{margin:"10px 0px 10px 0px"}},[n("el-col",[t._v("\n        选择日期\n        "),n("el-date-picker",{staticStyle:{width:"150px"},attrs:{clearable:!1,type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.listQuery.startDate,callback:function(e){t.$set(t.listQuery,"startDate",e)},expression:"listQuery.startDate"}}),t._v("\n        至\n        "),n("el-date-picker",{staticStyle:{width:"150px"},attrs:{clearable:!1,type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.listQuery.endDate,callback:function(e){t.$set(t.listQuery,"endDate",e)},expression:"listQuery.endDate"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查询")]),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-phone"},on:{click:t.handleClickSendMessages}},[t._v("批量发送消息")])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""},on:{"sort-change":t.handleColumnSort,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{label:"姓名","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:"/preview/child/"+e.row.childId}},[n("el-button",{attrs:{type:"text",size:"small"}},[t._v(t._s(e.row.name))])],1)]}}])}),t._v(" "),t.hasOptions("healthIndex")?n("el-table-column",{attrs:{prop:"healthIndex",label:"用眼健康评分",sortable:"custom","min-width":"80"}}):t._e(),t._v(" "),t.hasOptions("wearTime")?n("el-table-column",{attrs:{prop:"wearTime",label:"戴镜时间(分钟)",sortable:"custom","min-width":"80"}}):t._e(),t._v(" "),t.hasOptions("outTime")?n("el-table-column",{attrs:{prop:"outTime",label:"户外时间(分钟)",sortable:"custom","min-width":"80"}}):t._e(),t._v(" "),t.hasOptions("luxDay")?n("el-table-column",{attrs:{prop:"luxDay",label:"阳光摄入(Lux)",sortable:"custom","min-width":"80"}}):t._e(),t._v(" "),t.hasOptions("nearworkDay")?n("el-table-column",{attrs:{prop:"nearworkDay",label:"近距离用眼时间(分钟)",sortable:"custom","min-width":"80"}}):t._e(),t._v(" "),t.hasOptions("nearworkBurdenDay")?n("el-table-column",{attrs:{prop:"nearworkBurdenDay",label:"用眼负荷(D)",sortable:"custom","min-width":"80"}}):t._e(),t._v(" "),t.hasOptions("badPostureTimes")?n("el-table-column",{attrs:{prop:"badPostureTimes",label:"不良姿势提醒(次)",sortable:"custom","min-width":"80"}}):t._e(),t._v(" "),t.hasOptions("stepCount")?n("el-table-column",{attrs:{prop:"stepCount",label:"步数(步)",sortable:"custom","min-width":"60"}}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"daysCount",label:"同步天数",sortable:"custom","min-width":"80"}})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),n("group_channel",{ref:"group_channel"})],1)},[],!1,null,"859b23ba",null));d.options.__file="sorting.vue";e.default=d.exports},f7xa:function(t,e,n){"use strict";var a=n("sIyX");n.n(a).a},sIyX:function(t,e,n){},xttN:function(t,e,n){"use strict";n.d(e,"c",function(){return l}),n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var a=n("t3Un");function l(t){return Object(a.a)({url:"/api/a1/channel_logs",method:"get",params:t})}function i(t){return Object(a.a)({url:"/api/a1/channel_logs",method:"post",data:t})}function o(t){return Object(a.a)({url:"/api/a1/channel_logs/create_group",method:"post",data:t})}}}]);
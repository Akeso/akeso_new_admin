(window.webpackJsonp=window.webpackJsonp||[]).push([["1sRe"],{"1sRe":function(e,t,a){"use strict";a.r(t);var i=a("t3Un");var l=[{key:"",value:"全部"},{key:"v1",value:"一代"},{key:"v2",value:"二代"},{key:"v3",value:"三代"}],s=[{key:"",value:"全部"},{key:"bind",value:"已绑定"},{key:"unbind",value:"未绑定"}],n={filters:{stateFilter:function(e){return{bind:"success",unbind:"info"}[e]}},data:function(){return{deviceTypeOptions:l,stateOptions:s,list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,macAddress:void 0,state:void 0,deviceType:void 0,childName:void 0}}},created:function(){this.getList()},methods:{handleClick:function(e){var t=this;this.$confirm("此操作将解绑镜腿, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e){return Object(i.a)({url:"/api/a1/devices/"+e.id,method:"delete",params:e})})({id:e.id}).then(function(e){t.$message({type:"success",message:"解绑成功!"}),t.getList()})}).catch(function(){t.$message({type:"info",message:"已取消"})})},getList:function(){var e=this;(function(e){return Object(i.a)({url:"/api/a1/devices",method:"get",params:e})})(this.listQuery).then(function(t){e.list=t.data.items,e.total=t.data.total,setTimeout(function(){e.listLoading=!1},1500)})},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleColumnSort:function(e){this.listQuery.sortProp=e.prop,this.listQuery.sortOrder=e.order,this.getList()},handleFilter:function(){this.listQuery.page=1,this.getList()},handleFilterClear:function(){this.listQuery.page=1,this.listQuery.limit=20,this.listQuery.macAddress="",this.listQuery.state="",this.listQuery.deviceType="",this.listQuery.childName=""}}},r=a("KHd+"),o=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.generateShow("route.devices")))])]),e._v(" "),a("el-row",[e._v("\n      "+e._s(e.generateShow("common.mac_address"))+":\n      "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"180px"},attrs:{placeholder:e.generateShow("common.mac_address"),clearable:""},model:{value:e.listQuery.macAddress,callback:function(t){e.$set(e.listQuery,"macAddress",t)},expression:"listQuery.macAddress"}}),e._v("\n      "+e._s(e.generateShow("common.child_name"))+":\n      "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:e.generateShow("common.child_name"),clearable:""},model:{value:e.listQuery.childName,callback:function(t){e.$set(e.listQuery,"childName",t)},expression:"listQuery.childName"}})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[e._v("\n      "+e._s(e.generateShow("common.device_version"))+"：\n      "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:e.$t("device.deviceType"),clearable:""},model:{value:e.listQuery.deviceType,callback:function(t){e.$set(e.listQuery,"deviceType",t)},expression:"listQuery.deviceType"}},e._l(e.deviceTypeOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),e._v("\n      "+e._s(e.generateShow("common.bind_state"))+"：\n      "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},on:{change:e.handleFilter},model:{value:e.listQuery.state,callback:function(t){e.$set(e.listQuery,"state",t)},expression:"listQuery.state"}},e._l(e.stateOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(e._s(e.generateShow("common.search")))]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.handleFilterClear}},[e._v(e._s(e.generateShow("common.clear")))])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,border:""},on:{"sort-change":e.handleColumnSort}},[a("el-table-column",{attrs:{label:e.generateShow("common.mac_address"),prop:"macAddress","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{label:e.generateShow("common.device_version"),prop:"deviceType","min-width":"60"}}),e._v(" "),a("el-table-column",{attrs:{label:e.generateShow("common.bind_state"),"min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("stateFilter")(t.row.state)}},[e._v(e._s(t.row.stateName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.generateShow("common.child_name"),"min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:"/preview/child/"+t.row.childId}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v(e._s(t.row.childName))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.generateShow("common.bind_at"),prop:"deviceBindAt","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:e.generateShow("common.created_at"),prop:"createdAt","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:e.generateShow("common.operate"),"min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.row)}}},[e._v("解绑")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},[],!1,null,null,null);o.options.__file="devices.vue";t.default=o.exports}}]);